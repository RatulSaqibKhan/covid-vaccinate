services:
  mysql:
    ports:
      - ${MYSQL_PUBLISH_PORT}:3306

  adminer:
    ports:
      - ${ADMINER_PUBLISH_PORT}:8080

  redis:
    ports:
      - ${REDIS_PUBLISH_PORT}:6379

  rabbitmq:
    ports:
      - ${RABBITMQ_PUBLISH_PORT}:15672

  mailhog:
    ports:
      - ${MAILHOG_GUI_PORT}:8025
      - ${MAILHOG_SMTP_PORT}:1025

  ui:
    ports:
      - ${FRONTEND_UI_PORT}:3000

  app:
    volumes:
      - ${DOCKER_VOLUME_BACKEND_ROOT_DIR}:/var/www/html
    env_file:
      - .envs/app.env
      - .envs/web.env
      - .envs/php-ini.env
    ports:
      - ${WEB_HTTP_PUBLISH_PORT}:8000

  queue:
    volumes:
      - ${DOCKER_VOLUME_BACKEND_ROOT_DIR}:/var/www/html
    env_file:
      - .envs/app.env
      - .envs/web.env
      - .envs/php-ini.env

  cron:
    volumes:
      - ${DOCKER_VOLUME_BACKEND_ROOT_DIR}:/var/www/html
    env_file:
      - .envs/app.env
      - .envs/web.env
      - .envs/php-ini.env